= 
:allow-uri-read: 


[role="tabbed-block"]
====
.ANF
--
.Archivos de configuración de Terraform para la implementación de ANF Volume en Azure
Esta sección contiene varios archivos de configuración de Terraform para implementar/configurar el volumen ANF (Azure Netapp Files) en Azure.

Documentación de Terraform: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs[]

.Procedimiento
Para ejecutar la plantilla:

. Clonar el repositorio.
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. Navegue hasta la carpeta deseada
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Inicie sesión en su CLI de Azure (debe estar instalada).
+
[source, cli]
----
    az login
----
. Actualizar los valores de las variables en `vars/azure_anf.tfvars` .
+

NOTE: Puede optar por implementar el volumen ANF utilizando una red virtual y una subred existentes configurando la variable "vnet_creation_bool" y el valor "subnet_creation_bool" en falso y proporcionando "subnet_id_for_anf_vol".  También puede establecer esos valores como verdaderos y crear una nueva red virtual y subred, en cuyo caso, la ID de la subred se tomará automáticamente de la subred recién creada.

. Inicialice el repositorio de Terraform para instalar todos los requisitos previos y prepararse para la implementación.
+
[source, cli]
----
    terraform init
----
. Verifique los archivos terraform usando el comando terraform validate.
+
[source, cli]
----
    terraform validate
----
. Realice una ejecución en seco de la configuración para obtener una vista previa de todos los cambios esperados por la implementación.
+
[source, cli]
----
    terraform plan -target="module.anf" -var-file="vars/azure_anf.tfvars"
----
. Ejecutar la implementación
+
[source, cli]
----
    terraform apply -target="module.anf" -var-file="vars/azure_anf.tfvars"
----


Para eliminar la implementación

[source, cli]
----
  terraform destroy
----
.Recetas:
`Single Node Instance`

Variables de Terraform para un solo volumen ANF de NetApp .

[cols="20%, 10%, 70%"]
|===
| *Nombre* | *Tipo* | *Descripción* 


| *ubicación_az* | Cadena | (Obligatorio) Especifica la ubicación de Azure compatible donde existe el recurso.  Cambiar esto obliga a crear un nuevo recurso. 


| *prefijo az* | Cadena | (Obligatorio) El nombre del grupo de recursos donde se debe crear el volumen de NetApp .  Cambiar esto obliga a crear un nuevo recurso. 


| *espacio de direcciones az_vnet* | Cadena | (Obligatorio) El espacio de direcciones que utilizará la red virtual recién creada para la implementación del volumen ANF. 


| *prefijo_de_dirección_de_subred_az* | Cadena | (Obligatorio) El prefijo de dirección de subred que utilizará la red virtual recién creada para la implementación del volumen ANF. 


| *ruta_del_volumen_az* | Cadena | (Obligatorio) Una ruta de archivo única para el volumen.  Se utiliza al crear objetivos de montura.  Cambiar esto obliga a crear un nuevo recurso. 


| *tamaño_de_grupo_de_capacidad_az* | Entero | (Obligatorio) Tamaño del grupo de capacidad mencionado en TB. 


| *az_vnet_creation_bool* | Booleano | (Obligatorio) Establezca este valor booleano en `true` Si desea crear una nueva red virtual.  Ponlo en `false` para utilizar una red virtual existente. 


| *bool_creación_subred_az* | Booleano | (Obligatorio) Establezca este valor booleano en `true` para crear una nueva subred.  Ponlo en `false` utilizar una subred existente. 


| *id_de_subred_az_para_anf_vol* | Cadena | (Obligatorio) Mencione el ID de la subred en caso de que decida utilizar una subred existente configurando `subnet_creation_bool` a verdad.  Si se establece como falso, déjelo en el valor predeterminado. 


| *az_netapp_pool_service_level* | Cadena | (Obligatorio) El rendimiento objetivo del sistema de archivos.  Los valores válidos incluyen `Premium` , `Standard` , o `Ultra` . 


| *nivel de servicio az_netapp_vol* | Cadena | (Obligatorio) El rendimiento objetivo del sistema de archivos.  Los valores válidos incluyen `Premium` , `Standard` , o `Ultra` . 


| *protocolo az_netapp_vol* | Cadena | (Opcional) El protocolo de volumen de destino expresado como una lista.  Se admite la inclusión de un solo valor `CIFS` , `NFSv3` , o `NFSv4.1` .  Si no se define el argumento, el valor predeterminado será `NFSv3` .  Cambiar esto obligará a crear un nuevo recurso y se perderán datos. 


| *az_netapp_vol_security_style* | Cadena | (Opcional) Estilo de seguridad de volumen, los valores aceptados son `Unix` o `Ntfs` .  Si no se proporciona, se crea un volumen de protocolo único con el valor predeterminado `Unix` Si lo es `NFSv3` o `NFSv4.1` volumen, si `CIFS` , el valor predeterminado será `Ntfs` .  En un volumen de protocolo dual, si no se proporciona, su valor será `Ntfs` . 


| *cuota de almacenamiento az_netapp_vol* | Cadena | (Obligatorio) La cuota de almacenamiento máxima permitida para un sistema de archivos en gigabytes. 
|===

NOTE: Según la recomendación, este script utiliza el `prevent_destroy` argumento de ciclo de vida para mitigar la posibilidad de pérdida accidental de datos en el archivo de configuración.  Para obtener más información sobre el `prevent_destroy` argumento del ciclo de vida, consulte la documentación de Terraform: https://developer.hashicorp.com/terraform/tutorials/state/resource-lifecycle#prevent-resource-deletion[] .

--
.Protección de datos de ANF
--
.Archivos de configuración de Terraform para la implementación de ANF Volume con protección de datos en Azure
Esta sección contiene varios archivos de configuración de Terraform para implementar/configurar el volumen ANF (Azure Netapp Files) con protección de datos en Azure.

Documentación de Terraform: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs[]

.Procedimiento
Para ejecutar la plantilla:

. Clonar el repositorio.
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. Navegue hasta la carpeta deseada
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Inicie sesión en su CLI de Azure (debe estar instalada).
+
[source, cli]
----
    az login
----
. Actualizar los valores de las variables en `vars/azure_anf_data_protection.tfvars` .
+

NOTE: Puede optar por implementar el volumen ANF utilizando una red virtual y una subred existentes configurando la variable "vnet_creation_bool" y el valor "subnet_creation_bool" en falso y proporcionando "subnet_id_for_anf_vol".  También puede establecer esos valores como verdaderos y crear una nueva red virtual y subred, en cuyo caso, la ID de la subred se tomará automáticamente de la subred recién creada.

. Inicialice el repositorio de Terraform para instalar todos los requisitos previos y prepararse para la implementación.
+
[source, cli]
----
    terraform init
----
. Verifique los archivos terraform usando el comando terraform validate.
+
[source, cli]
----
    terraform validate
----
. Realice una ejecución en seco de la configuración para obtener una vista previa de todos los cambios esperados por la implementación.
+
[source, cli]
----
    terraform plan -target="module.anf_data_protection" -var-file="vars/azure_anf_data_protection.tfvars"
----
. Ejecutar la implementación
+
[source, cli]
----
    terraform apply -target="module.anf_data_protection" -var-file="vars/azure_anf_data_protection.tfvars
----


Para eliminar la implementación

[source, cli]
----
  terraform destroy
----
.Recetas:
`ANF Data Protection`

Variables de Terraform para un solo volumen ANF con protección de datos habilitada.

[cols="20%, 10%, 70%"]
|===
| *Nombre* | *Tipo* | *Descripción* 


| *ubicación_az* | Cadena | (Obligatorio) Especifica la ubicación de Azure compatible donde existe el recurso.  Cambiar esto obliga a crear un nuevo recurso. 


| *ubicación alternativa az* | Cadena | (Obligatorio) La ubicación de Azure donde se creará el volumen secundario 


| *prefijo az* | Cadena | (Obligatorio) El nombre del grupo de recursos donde se debe crear el volumen de NetApp .  Cambiar esto obliga a crear un nuevo recurso. 


| *espacio de direcciones principal de az_vnet* | Cadena | (Obligatorio) El espacio de direcciones que utilizará la red virtual recién creada para la implementación del volumen principal de ANF. 


| *espacio de direcciones secundarias az_vnet* | Cadena | (Obligatorio) El espacio de direcciones que utilizará la red virtual recién creada para la implementación del volumen secundario de ANF. 


| *prefijo_de_dirección_principal_de_subred_az* | Cadena | (Obligatorio) El prefijo de dirección de subred que utilizará la red virtual recién creada para la implementación del volumen principal de ANF. 


| *prefijo_de_dirección_secundaria_de_subred_az* | Cadena | (Obligatorio) El prefijo de dirección de subred que utilizará la red virtual recién creada para la implementación del volumen secundario de ANF. 


| *ruta_de_volumen_az_primaria* | Cadena | (Obligatorio) Una ruta de archivo única para el volumen principal.  Se utiliza al crear objetivos de montura.  Cambiar esto obliga a crear un nuevo recurso. 


| *ruta_de_volumen_az_secundaria* | Cadena | (Obligatorio) Una ruta de archivo única para el volumen secundario.  Se utiliza al crear objetivos de montura.  Cambiar esto obliga a crear un nuevo recurso. 


| *tamaño_de_grupo_de_capacidad_az_primario* | Entero | (Obligatorio) Tamaño del grupo de capacidad mencionado en TB. 


| *tamaño_de_grupo_de_capacidad_az_secundario* | Entero | (Obligatorio) Tamaño del grupo de capacidad mencionado en TB. 


| *az_vnet_primary_creation_bool* | Booleano | (Obligatorio) Establezca este valor booleano en `true` Si desea crear una nueva red virtual para el volumen principal.  Ponlo en `false` para utilizar una red virtual existente. 


| *bool_creación_secundaria_az_vnet* | Booleano | (Obligatorio) Establezca este valor booleano en `true` Si desea crear una nueva red virtual para el volumen secundario.  Ponlo en `false` para utilizar una red virtual existente. 


| *az_subnet_primary_creation_bool* | Booleano | (Obligatorio) Establezca este valor booleano en `true` para crear una nueva subred para el volumen principal.  Ponlo en `false` utilizar una subred existente. 


| *az_subnet_secondary_creation_bool* | Booleano | (Obligatorio) Establezca este valor booleano en `true` para crear una nueva subred para el volumen secundario.  Ponlo en `false` utilizar una subred existente. 


| *id_de_subred_primaria_az_para_anf_vol* | Cadena | (Obligatorio) Mencione el ID de la subred en caso de que decida utilizar una subred existente configurando `subnet_primary_creation_bool` a verdad.  Si se establece como falso, déjelo en el valor predeterminado. 


| *id_de_subred_secundaria_az_para_anf_vol* | Cadena | (Obligatorio) Mencione el ID de la subred en caso de que decida utilizar una subred existente configurando `subnet_secondary_creation_bool` a verdad.  Si se establece como falso, déjelo en el valor predeterminado. 


| *az_netapp_pool_service_level_primary* | Cadena | (Obligatorio) El rendimiento objetivo del sistema de archivos.  Los valores válidos incluyen `Premium` , `Standard` , o `Ultra` . 


| *nivel de servicio az_netapp_pool_secundario* | Cadena | (Obligatorio) El rendimiento objetivo del sistema de archivos.  Los valores válidos incluyen `Premium` , `Standard` , o `Ultra` . 


| *az_netapp_vol_service_level_primary* | Cadena | (Obligatorio) El rendimiento objetivo del sistema de archivos.  Los valores válidos incluyen `Premium` , `Standard` , o `Ultra` . 


| *az_netapp_vol_service_level_secundario* | Cadena | (Obligatorio) El rendimiento objetivo del sistema de archivos.  Los valores válidos incluyen `Premium` , `Standard` , o `Ultra` . 


| *az_netapp_vol_protocol_primary* | Cadena | (Opcional) El protocolo de volumen de destino expresado como una lista.  Se admite la inclusión de un solo valor `CIFS` , `NFSv3` , o `NFSv4.1` .  Si no se define el argumento, el valor predeterminado será `NFSv3` .  Cambiar esto obligará a crear un nuevo recurso y se perderán datos. 


| *az_netapp_vol_protocol_secundario* | Cadena | (Opcional) El protocolo de volumen de destino expresado como una lista.  Se admite la inclusión de un solo valor `CIFS` , `NFSv3` , o `NFSv4.1` .  Si no se define el argumento, el valor predeterminado será `NFSv3` .  Cambiar esto obligará a crear un nuevo recurso y se perderán datos. 


| *cuota de almacenamiento principal de az_netapp_vol* | Cadena | (Obligatorio) La cuota de almacenamiento máxima permitida para un sistema de archivos en gigabytes. 


| *cuota de almacenamiento az_netapp_vol_secundaria* | Cadena | (Obligatorio) La cuota de almacenamiento máxima permitida para un sistema de archivos en gigabytes. 


| *frecuencia de replicación az_dp* | Cadena | (Obligatorio) Frecuencia de replicación, los valores admitidos son `10minutes` , `hourly` , `daily` , los valores distinguen entre mayúsculas y minúsculas. 
|===

NOTE: Según la recomendación, este script utiliza el `prevent_destroy` argumento de ciclo de vida para mitigar la posibilidad de pérdida accidental de datos en el archivo de configuración.  Para obtener más información sobre el `prevent_destroy` argumento del ciclo de vida, consulte la documentación de Terraform: https://developer.hashicorp.com/terraform/tutorials/state/resource-lifecycle#prevent-resource-deletion[] .

--
.Protocolo dual ANF
--
.Archivos de configuración de Terraform para la implementación de un volumen ANF con protocolo dual en Azure
Esta sección contiene varios archivos de configuración de Terraform para implementar/configurar el volumen ANF (Azure Netapp Files) con protocolo dual habilitado en Azure.

Documentación de Terraform: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs[]

.Procedimiento
Para ejecutar la plantilla:

. Clonar el repositorio.
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. Navegue hasta la carpeta deseada
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Inicie sesión en su CLI de Azure (debe estar instalada).
+
[source, cli]
----
    az login
----
. Actualizar los valores de las variables en `vars/azure_anf_dual_protocol.tfvars` .
+

NOTE: Puede optar por implementar el volumen ANF utilizando una red virtual y una subred existentes configurando la variable "vnet_creation_bool" y el valor "subnet_creation_bool" en falso y proporcionando "subnet_id_for_anf_vol".  También puede establecer esos valores como verdaderos y crear una nueva red virtual y subred, en cuyo caso, la ID de la subred se tomará automáticamente de la subred recién creada.

. Inicialice el repositorio de Terraform para instalar todos los requisitos previos y prepararse para la implementación.
+
[source, cli]
----
    terraform init
----
. Verifique los archivos terraform usando el comando terraform validate.
+
[source, cli]
----
    terraform validate
----
. Realice una ejecución en seco de la configuración para obtener una vista previa de todos los cambios esperados por la implementación.
+
[source, cli]
----
    terraform plan -target="module.anf_dual_protocol" -var-file="vars/azure_anf_dual_protocol.tfvars"
----
. Ejecutar la implementación
+
[source, cli]
----
    terraform apply -target="module.anf_dual_protocol" -var-file="vars/azure_anf_dual_protocol.tfvars"
----


Para eliminar la implementación

[source, cli]
----
  terraform destroy
----
.Recetas:
`Single Node Instance`

Variables de Terraform para un solo volumen ANF con protocolo dual habilitado.

[cols="20%, 10%, 70%"]
|===
| *Nombre* | *Tipo* | *Descripción* 


| *ubicación_az* | Cadena | (Obligatorio) Especifica la ubicación de Azure compatible donde existe el recurso.  Cambiar esto obliga a crear un nuevo recurso. 


| *prefijo az* | Cadena | (Obligatorio) El nombre del grupo de recursos donde se debe crear el volumen de NetApp .  Cambiar esto obliga a crear un nuevo recurso. 


| *espacio de direcciones az_vnet* | Cadena | (Obligatorio) El espacio de direcciones que utilizará la red virtual recién creada para la implementación del volumen ANF. 


| *prefijo_de_dirección_de_subred_az* | Cadena | (Obligatorio) El prefijo de dirección de subred que utilizará la red virtual recién creada para la implementación del volumen ANF. 


| *ruta_del_volumen_az* | Cadena | (Obligatorio) Una ruta de archivo única para el volumen.  Se utiliza al crear objetivos de montura.  Cambiar esto obliga a crear un nuevo recurso. 


| *tamaño_de_grupo_de_capacidad_az* | Entero | (Obligatorio) Tamaño del grupo de capacidad mencionado en TB. 


| *az_vnet_creation_bool* | Booleano | (Obligatorio) Establezca este valor booleano en `true` Si desea crear una nueva red virtual.  Ponlo en `false` para utilizar una red virtual existente. 


| *bool_creación_subred_az* | Booleano | (Obligatorio) Establezca este valor booleano en `true` para crear una nueva subred.  Ponlo en `false` utilizar una subred existente. 


| *id_de_subred_az_para_anf_vol* | Cadena | (Obligatorio) Mencione el ID de la subred en caso de que decida utilizar una subred existente configurando `subnet_creation_bool` a verdad.  Si se establece como falso, déjelo en el valor predeterminado. 


| *az_netapp_pool_service_level* | Cadena | (Obligatorio) El rendimiento objetivo del sistema de archivos.  Los valores válidos incluyen `Premium` , `Standard` , o `Ultra` . 


| *nivel de servicio az_netapp_vol* | Cadena | (Obligatorio) El rendimiento objetivo del sistema de archivos.  Los valores válidos incluyen `Premium` , `Standard` , o `Ultra` . 


| *az_netapp_vol_protocolo1* | Cadena | (Obligatorio) El protocolo de volumen de destino expresado como una lista.  Se admite la inclusión de un solo valor `CIFS` , `NFSv3` , o `NFSv4.1` .  Si no se define el argumento, el valor predeterminado será `NFSv3` .  Cambiar esto obligará a crear un nuevo recurso y se perderán datos. 


| *az_netapp_vol_protocolo2* | Cadena | (Obligatorio) El protocolo de volumen de destino expresado como una lista.  Se admite la inclusión de un solo valor `CIFS` , `NFSv3` , o `NFSv4.1` .  Si no se define el argumento, el valor predeterminado será `NFSv3` .  Cambiar esto obligará a crear un nuevo recurso y se perderán datos. 


| *cuota de almacenamiento az_netapp_vol* | Cadena | (Obligatorio) La cuota de almacenamiento máxima permitida para un sistema de archivos en gigabytes. 


| *nombre de usuario del servidor az_smb* | Cadena | (Obligatorio) Nombre de usuario para crear el objeto ActiveDirectory. 


| *contraseña del servidor az_smb* | Cadena | (Obligatorio) Contraseña de usuario para crear el objeto ActiveDirectory. 


| *nombre_del_servidor_az_smb* | Cadena | (Obligatorio) Nombre del servidor para crear el objeto ActiveDirectory. 


| *servidores dns_az_smb* | Cadena | (Obligatorio) IP del servidor DNS para crear el objeto ActiveDirectory. 
|===

NOTE: Según la recomendación, este script utiliza el `prevent_destroy` argumento de ciclo de vida para mitigar la posibilidad de pérdida accidental de datos en el archivo de configuración.  Para obtener más información sobre el `prevent_destroy` argumento del ciclo de vida, consulte la documentación de Terraform: https://developer.hashicorp.com/terraform/tutorials/state/resource-lifecycle#prevent-resource-deletion[] .

--
.Volumen ANF de la instantánea
--
.Archivos de configuración de Terraform para la implementación de un volumen ANF desde una instantánea en Azure
Esta sección contiene varios archivos de configuración de Terraform para implementar/configurar el volumen ANF (Azure Netapp Files) desde una instantánea en Azure.

Documentación de Terraform: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs[]

.Procedimiento
Para ejecutar la plantilla:

. Clonar el repositorio.
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. Navegue hasta la carpeta deseada
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Inicie sesión en su CLI de Azure (debe estar instalada).
+
[source, cli]
----
    az login
----
. Actualizar los valores de las variables en `vars/azure_anf_volume_from_snapshot.tfvars` .



NOTE: Puede optar por implementar el volumen ANF utilizando una red virtual y una subred existentes configurando la variable "vnet_creation_bool" y el valor "subnet_creation_bool" en falso y proporcionando "subnet_id_for_anf_vol".  También puede establecer esos valores como verdaderos y crear una nueva red virtual y subred, en cuyo caso, la ID de la subred se tomará automáticamente de la subred recién creada.

. Inicialice el repositorio de Terraform para instalar todos los requisitos previos y prepararse para la implementación.
+
[source, cli]
----
    terraform init
----
. Verifique los archivos terraform usando el comando terraform validate.
+
[source, cli]
----
    terraform validate
----
. Realice una ejecución en seco de la configuración para obtener una vista previa de todos los cambios esperados por la implementación.
+
[source, cli]
----
    terraform plan -target="module.anf_volume_from_snapshot" -var-file="vars/azure_anf_volume_from_snapshot.tfvars"
----
. Ejecutar la implementación
+
[source, cli]
----
    terraform apply -target="module.anf_volume_from_snapshot" -var-file="vars/azure_anf_volume_from_snapshot.tfvars"
----


Para eliminar la implementación

[source, cli]
----
  terraform destroy
----
.Recetas:
`Single Node Instance`

Variables de Terraform para un solo volumen ANF mediante instantánea.

[cols="20%, 10%, 70%"]
|===
| *Nombre* | *Tipo* | *Descripción* 


| *ubicación_az* | Cadena | (Obligatorio) Especifica la ubicación de Azure compatible donde existe el recurso.  Cambiar esto obliga a crear un nuevo recurso. 


| *prefijo az* | Cadena | (Obligatorio) El nombre del grupo de recursos donde se debe crear el volumen de NetApp .  Cambiar esto obliga a crear un nuevo recurso. 


| *espacio de direcciones az_vnet* | Cadena | (Obligatorio) El espacio de direcciones que utilizará la red virtual recién creada para la implementación del volumen ANF. 


| *prefijo_de_dirección_de_subred_az* | Cadena | (Obligatorio) El prefijo de dirección de subred que utilizará la red virtual recién creada para la implementación del volumen ANF. 


| *ruta_del_volumen_az* | Cadena | (Obligatorio) Una ruta de archivo única para el volumen.  Se utiliza al crear objetivos de montura.  Cambiar esto obliga a crear un nuevo recurso. 


| *tamaño_de_grupo_de_capacidad_az* | Entero | (Obligatorio) Tamaño del grupo de capacidad mencionado en TB. 


| *az_vnet_creation_bool* | Booleano | (Obligatorio) Establezca este valor booleano en `true` Si desea crear una nueva red virtual.  Ponlo en `false` para utilizar una red virtual existente. 


| *bool_creación_subred_az* | Booleano | (Obligatorio) Establezca este valor booleano en `true` para crear una nueva subred.  Ponlo en `false` utilizar una subred existente. 


| *id_de_subred_az_para_anf_vol* | Cadena | (Obligatorio) Mencione el ID de la subred en caso de que decida utilizar una subred existente configurando `subnet_creation_bool` a verdad.  Si se establece como falso, déjelo en el valor predeterminado. 


| *az_netapp_pool_service_level* | Cadena | (Obligatorio) El rendimiento objetivo del sistema de archivos.  Los valores válidos incluyen `Premium` , `Standard` , o `Ultra` . 


| *nivel de servicio az_netapp_vol* | Cadena | (Obligatorio) El rendimiento objetivo del sistema de archivos.  Los valores válidos incluyen `Premium` , `Standard` , o `Ultra` . 


| *protocolo az_netapp_vol* | Cadena | (Opcional) El protocolo de volumen de destino expresado como una lista.  Se admite la inclusión de un solo valor `CIFS` , `NFSv3` , o `NFSv4.1` .  Si no se define el argumento, el valor predeterminado será `NFSv3` .  Cambiar esto obligará a crear un nuevo recurso y se perderán datos. 


| *cuota de almacenamiento az_netapp_vol* | Cadena | (Obligatorio) La cuota de almacenamiento máxima permitida para un sistema de archivos en gigabytes. 


| *az_snapshot_id* | Cadena | (Obligatorio) ID de instantánea con la que se creará el nuevo volumen ANF. 
|===

NOTE: Según la recomendación, este script utiliza el `prevent_destroy` argumento de ciclo de vida para mitigar la posibilidad de pérdida accidental de datos en el archivo de configuración.  Para obtener más información sobre el `prevent_destroy` argumento del ciclo de vida, consulte la documentación de Terraform: https://developer.hashicorp.com/terraform/tutorials/state/resource-lifecycle#prevent-resource-deletion[] .

--
.Implementación de nodo único de CVO
--
.Archivos de configuración de Terraform para la implementación de CVO de nodo único en Azure
Esta sección contiene varios archivos de configuración de Terraform para implementar/configurar CVO de nodo único (Cloud Volumes ONTAP) en Azure.

Documentación de Terraform: https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs[]

.Procedimiento
Para ejecutar la plantilla:

. Clonar el repositorio.
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. Navegue hasta la carpeta deseada
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Inicie sesión en su CLI de Azure (debe estar instalada).
+
[source, cli]
----
    az login
----
. Actualizar las variables en `vars\azure_cvo_single_node_deployment.tfvars` .
. Inicialice el repositorio de Terraform para instalar todos los requisitos previos y prepararse para la implementación.
+
[source, cli]
----
    terraform init
----
. Verifique los archivos terraform usando el comando terraform validate.
+
[source, cli]
----
    terraform validate
----
. Realice una ejecución en seco de la configuración para obtener una vista previa de todos los cambios esperados por la implementación.
+
[source, cli]
----
    terraform plan -target="module.az_cvo_single_node_deployment" -var-file="vars\azure_cvo_single_node_deployment.tfvars"
----
. Ejecutar la implementación
+
[source, cli]
----
    terraform apply -target="module.az_cvo_single_node_deployment" -var-file="vars\azure_cvo_single_node_deployment.tfvars"
----


Para eliminar la implementación

[source, cli]
----
  terraform destroy
----
.Recetas:
`Single Node Instance`

Variables de Terraform para Cloud Volumes ONTAP (CVO) de nodo único.

[cols="20%, 10%, 70%"]
|===
| *Nombre* | *Tipo* | *Descripción* 


| *token de actualización* | Cadena | (Obligatorio) El token de actualización del administrador de nube de NetApp .  Esto se puede generar desde NetApp Cloud Central. 


| *nombre_del_conector_az* | Cadena | (Obligatorio) El nombre del conector de Cloud Manager. 


| *ubicación del conector az* | Cadena | (Obligatorio) La ubicación donde se creará el conector de Cloud Manager. 


| *id_de_suscripción_del_conector_az* | Cadena | (Obligatorio) El identificador de la suscripción de Azure. 


| *az_connector_company* | Cadena | (Obligatorio) El nombre de la empresa del usuario. 


| *grupo de recursos del conector az* | Entero | (Obligatorio) El grupo de recursos en Azure donde se crearán los recursos. 


| *id_de_subred_del_conector_az* | Cadena | (Obligatorio) El nombre de la subred de la máquina virtual. 


| *id_de_red_virtual_del_conector_az* | Cadena | (Obligatorio) El nombre de la red virtual. 


| *nombre del grupo de seguridad de red del conector az* | Cadena | (Obligatorio) El nombre del grupo de seguridad para la instancia. 


| *dirección IP pública asociada al conector az* | Cadena | (Obligatorio) Indica si se debe asociar la dirección IP pública a la máquina virtual. 


| *id de cuenta del conector az* | Cadena | (Obligatorio) El ID de la cuenta de NetApp con la que se asociará el conector.  Si no se proporciona, Cloud Manager utiliza la primera cuenta.  Si no existe ninguna cuenta, Cloud Manager crea una nueva cuenta.  Puede encontrar el ID de la cuenta en la pestaña de cuenta de Cloud Manager en https://cloudmanager.netapp.com[] . 


| *contraseña de administrador del conector az* | Cadena | (Obligatorio) La contraseña para el conector. 


| *nombre de usuario del administrador del conector az* | Cadena | (Obligatorio) El nombre de usuario para el Conector. 


| *nombre_az_cvo* | Cadena | (Obligatorio) El nombre del entorno de trabajo de Cloud Volumes ONTAP . 


| *ubicación az_cvo* | Cadena | (Obligatorio) La ubicación donde se creará el entorno de trabajo. 


| *id de subred az_cvo* | Cadena | (Obligatorio) El nombre de la subred del sistema Cloud Volumes ONTAP . 


| *az_cvo_vnet_id* | Cadena | (Obligatorio) El nombre de la red virtual. 


| *grupo de recursos az_cvo_vnet* | Cadena | (Obligatorio) El grupo de recursos en Azure asociado a la red virtual. 


| *tipo de cifrado de datos az_cvo* | Cadena | (Obligatorio) El tipo de cifrado a utilizar para el entorno de trabajo: `AZURE` , `NONE` ].  El valor predeterminado es `AZURE` . 


| *tipo de almacenamiento az_cvo* | Cadena | (Obligatorio) El tipo de almacenamiento para el primer agregado de datos: `Premium_LRS` , `Standard_LRS` , `StandardSSD_LRS` ].  El valor predeterminado es `Premium_LRS` 


| *contraseña az_cvo_svm* | Cadena | (Obligatorio) La contraseña de administrador para Cloud Volumes ONTAP. 


| *id del espacio de trabajo az_cvo* | Cadena | (Obligatorio) El ID del espacio de trabajo de Cloud Manager donde desea implementar Cloud Volumes ONTAP.  Si no se proporciona, Cloud Manager utiliza el primer espacio de trabajo.  Puede encontrar el ID en la pestaña Espacio de trabajo en https://cloudmanager.netapp.com[] . 


| *nivel de capacidad az_cvo* | Cadena | (Obligatorio) Si desea habilitar la clasificación de datos para el primer agregado de datos:[`Blob` , `NONE` ].  El valor predeterminado es `BLOB` . 


| *estado de velocidad de escritura de az_cvo* | Cadena | (Obligatorio) La configuración de velocidad de escritura para Cloud Volumes ONTAP: `NORMAL` , `HIGH` ].  El valor predeterminado es `NORMAL` .  Este argumento no es relevante para los pares HA. 


| *versión az_cvo_ontap* | Cadena | (Obligatorio) La versión de ONTAP requerida.  Se ignora si 'use_latest_version' está establecido como verdadero.  El valor predeterminado es utilizar la última versión. 


| *tipo_de_instancia_az_cvo* | Cadena | (Obligatorio) El tipo de instancia a utilizar, que depende del tipo de licencia que haya elegido: Explorar:[`Standard_DS3_v2` ], Estándar:[`Standard_DS4_v2,Standard_DS13_v2,Standard_L8s_v2` ], De primera calidad:[`Standard_DS5_v2`,`Standard_DS14_v2` ], BYOL: todos los tipos de instancias definidos para PayGo.  Para conocer más tipos de instancias compatibles, consulte las Notas de la versión de Cloud Volumes ONTAP .  El valor predeterminado es `Standard_DS4_v2` . 


| *tipo de licencia az_cvo* | Cadena | (Obligatorio) El tipo de licencia a utilizar.  Para un solo nodo:[`azure-cot-explore-paygo` , `azure-cot-standard-paygo` , `azure-cot-premium-paygo` , `azure-cot-premium-byol` , `capacity-paygo` ].  Para HA:[`azure-ha-cot-standard-paygo` , `azure-ha-cot-premium-paygo` , `azure-ha-cot-premium-byol` , `ha-capacity-paygo` ].  El valor predeterminado es `azure-cot-standard-paygo` .  Usar `capacity-paygo` o `ha-capacity-paygo` para HA al seleccionar Traiga su propia licencia, tipo Basado en capacidad o Freemium.  Usar `azure-cot-premium-byol` o `azure-ha-cot-premium-byol` para HA al seleccionar Traiga su propia licencia, tipo Basado en nodos. 


| *cuenta az_cvo_nss* | Cadena | (Obligatorio) ID de cuenta del sitio de soporte de NetApp para usar con este sistema Cloud Volumes ONTAP .  Si el tipo de licencia es BYOL y no se proporciona una cuenta NSS, Cloud Manager intenta utilizar la primera cuenta NSS existente. 


| *id_de_inquilino_az* | Cadena | (Obligatorio) Identificador de inquilino de la entidad de servicio o aplicación registrada en Azure. 


| *id_de_aplicación_az* | Cadena | (Obligatorio) Id. de la aplicación o entidad de servicio registrada en Azure. 


| *clave_de_aplicación_az* | Cadena | (Obligatorio) La clave de aplicación de la entidad de servicio o aplicación registrada en Azure. 
|===
--
.Implementación de CVO HA
--
.Archivos de configuración de Terraform para la implementación de CVO HA en Azure
Esta sección contiene varios archivos de configuración de Terraform para implementar/configurar CVO (Cloud Volumes ONTAP) HA (alta disponibilidad) en Azure.

Documentación de Terraform: https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs[]

.Procedimiento
Para ejecutar la plantilla:

. Clonar el repositorio.
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. Navegue hasta la carpeta deseada
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Inicie sesión en su CLI de Azure (debe estar instalada).
+
[source, cli]
----
    az login
----
. Actualizar las variables en `vars\azure_cvo_ha_deployment.tfvars` .
. Inicialice el repositorio de Terraform para instalar todos los requisitos previos y prepararse para la implementación.
+
[source, cli]
----
    terraform init
----
. Verifique los archivos terraform usando el comando terraform validate.
+
[source, cli]
----
    terraform validate
----
. Realice una ejecución en seco de la configuración para obtener una vista previa de todos los cambios esperados por la implementación.
+
[source, cli]
----
    terraform plan -target="module.az_cvo_ha_deployment" -var-file="vars\azure_cvo_ha_deployment.tfvars"
----
. Ejecutar la implementación
+
[source, cli]
----
    terraform apply -target="module.az_cvo_ha_deployment" -var-file="vars\azure_cvo_ha_deployment.tfvars"
----


Para eliminar la implementación

[source, cli]
----
  terraform destroy
----
.Recetas:
`HA Pair Instance`

Variables de Terraform para el par HA Cloud Volumes ONTAP (CVO).

[cols="20%, 10%, 70%"]
|===
| *Nombre* | *Tipo* | *Descripción* 


| *token de actualización* | Cadena | (Obligatorio) El token de actualización del administrador de nube de NetApp .  Esto se puede generar desde NetApp Cloud Central. 


| *nombre_del_conector_az* | Cadena | (Obligatorio) El nombre del conector de Cloud Manager. 


| *ubicación del conector az* | Cadena | (Obligatorio) La ubicación donde se creará el conector de Cloud Manager. 


| *id_de_suscripción_del_conector_az* | Cadena | (Obligatorio) El identificador de la suscripción de Azure. 


| *az_connector_company* | Cadena | (Obligatorio) El nombre de la empresa del usuario. 


| *grupo de recursos del conector az* | Entero | (Obligatorio) El grupo de recursos en Azure donde se crearán los recursos. 


| *id_de_subred_del_conector_az* | Cadena | (Obligatorio) El nombre de la subred de la máquina virtual. 


| *id_de_red_virtual_del_conector_az* | Cadena | (Obligatorio) El nombre de la red virtual. 


| *nombre del grupo de seguridad de red del conector az* | Cadena | (Obligatorio) El nombre del grupo de seguridad para la instancia. 


| *dirección IP pública asociada al conector az* | Cadena | (Obligatorio) Indica si se debe asociar la dirección IP pública a la máquina virtual. 


| *id de cuenta del conector az* | Cadena | (Obligatorio) El ID de la cuenta de NetApp con la que se asociará el conector.  Si no se proporciona, Cloud Manager utiliza la primera cuenta.  Si no existe ninguna cuenta, Cloud Manager crea una nueva cuenta.  Puede encontrar el ID de la cuenta en la pestaña de cuenta de Cloud Manager en https://cloudmanager.netapp.com[] . 


| *contraseña de administrador del conector az* | Cadena | (Obligatorio) La contraseña para el conector. 


| *nombre de usuario del administrador del conector az* | Cadena | (Obligatorio) El nombre de usuario para el Conector. 


| *nombre_az_cvo* | Cadena | (Obligatorio) El nombre del entorno de trabajo de Cloud Volumes ONTAP . 


| *ubicación az_cvo* | Cadena | (Obligatorio) La ubicación donde se creará el entorno de trabajo. 


| *id de subred az_cvo* | Cadena | (Obligatorio) El nombre de la subred del sistema Cloud Volumes ONTAP . 


| *az_cvo_vnet_id* | Cadena | (Obligatorio) El nombre de la red virtual. 


| *grupo de recursos az_cvo_vnet* | Cadena | (Obligatorio) El grupo de recursos en Azure asociado a la red virtual. 


| *tipo de cifrado de datos az_cvo* | Cadena | (Obligatorio) El tipo de cifrado a utilizar para el entorno de trabajo: `AZURE` , `NONE` ].  El valor predeterminado es `AZURE` . 


| *tipo de almacenamiento az_cvo* | Cadena | (Obligatorio) El tipo de almacenamiento para el primer agregado de datos: `Premium_LRS` , `Standard_LRS` , `StandardSSD_LRS` ].  El valor predeterminado es `Premium_LRS` 


| *contraseña az_cvo_svm* | Cadena | (Obligatorio) La contraseña de administrador para Cloud Volumes ONTAP. 


| *id del espacio de trabajo az_cvo* | Cadena | (Obligatorio) El ID del espacio de trabajo de Cloud Manager donde desea implementar Cloud Volumes ONTAP.  Si no se proporciona, Cloud Manager utiliza el primer espacio de trabajo.  Puede encontrar el ID en la pestaña Espacio de trabajo en https://cloudmanager.netapp.com[] . 


| *nivel de capacidad az_cvo* | Cadena | (Obligatorio) Si desea habilitar la clasificación de datos para el primer agregado de datos:[`Blob` , `NONE` ].  El valor predeterminado es `BLOB` . 


| *estado de velocidad de escritura de az_cvo* | Cadena | (Obligatorio) La configuración de velocidad de escritura para Cloud Volumes ONTAP: `NORMAL` , `HIGH` ].  El valor predeterminado es `NORMAL` .  Este argumento no es relevante para los pares HA. 


| *versión az_cvo_ontap* | Cadena | (Obligatorio) La versión de ONTAP requerida.  Se ignora si 'use_latest_version' está establecido como verdadero.  El valor predeterminado es utilizar la última versión. 


| *tipo_de_instancia_az_cvo* | Cadena | (Obligatorio) El tipo de instancia a utilizar, que depende del tipo de licencia que haya elegido: Explorar:[`Standard_DS3_v2` ], Estándar:[`Standard_DS4_v2, Standard_DS13_v2, Standard_L8s_v2` ], De primera calidad:[`Standard_DS5_v2` , `Standard_DS14_v2` ], BYOL: todos los tipos de instancias definidos para PayGo.  Para conocer más tipos de instancias compatibles, consulte las Notas de la versión de Cloud Volumes ONTAP .  El valor predeterminado es `Standard_DS4_v2` . 


| *tipo de licencia az_cvo* | Cadena | (Obligatorio) El tipo de licencia a utilizar.  Para un solo nodo:[`azure-cot-explore-paygo, azure-cot-standard-paygo, azure-cot-premium-paygo, azure-cot-premium-byol, capacity-paygo` ].  Para HA:[`azure-ha-cot-standard-paygo, azure-ha-cot-premium-paygo, azure-ha-cot-premium-byol, ha-capacity-paygo` ].  El valor predeterminado es `azure-cot-standard-paygo` .  Usar `capacity-paygo` o `ha-capacity-paygo` para HA al seleccionar Traiga su propia licencia, tipo Basado en capacidad o Freemium.  Usar `azure-cot-premium-byol` o `azure-ha-cot-premium-byol` para HA al seleccionar Traiga su propia licencia, tipo Basado en nodos. 


| *cuenta az_cvo_nss* | Cadena | (Obligatorio) ID de cuenta del sitio de soporte de NetApp para usar con este sistema Cloud Volumes ONTAP .  Si el tipo de licencia es BYOL y no se proporciona una cuenta NSS, Cloud Manager intenta utilizar la primera cuenta NSS existente. 


| *id_de_inquilino_az* | Cadena | (Obligatorio) Identificador de inquilino de la entidad de servicio o aplicación registrada en Azure. 


| *id_de_aplicación_az* | Cadena | (Obligatorio) Id. de la aplicación o entidad de servicio registrada en Azure. 


| *clave_de_aplicación_az* | Cadena | (Obligatorio) La clave de aplicación de la entidad de servicio o aplicación registrada en Azure. 
|===
--
====